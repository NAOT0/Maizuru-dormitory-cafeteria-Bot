# 寮食堂献立LINE Bot ～ズボラな高専生へ～

[![友だち追加](https://scdn.line-apps.com/n/line_add_friends/btn/ja.png)](https://line.me/R/ti/p/%40232xflty)

舞鶴工業高等専門学校の寮食堂の献立を、もっと手軽に確認するために開発したLINE Botです。このBotの開発秘話は、[LINE Developer CommunityのLT大会](https://www.youtube.com/watch?v=qLdPqgF0EnA)でも発表させていただきました。


---

## 目次

* [開発の背景](#開発の背景)
* [主な機能](#主な機能)
* [システム構成](#システム構成)
* [利用状況と反響](#利用状況と反響)
* [開発して良かったこと](#開発して良かったこと)
* [反省・今後の改善点](#反省今後の改善点)
* [開発者情報](#開発者情報)

---

## 開発の背景

夕方になると、友人との会話はいつも「今日のご飯何？」。しかし、舞鶴高専の寮の献立表を確認するのは、正直に言ってとても面倒でした。

* **献立表が見にくい**：週7日×3食分の情報が1枚の画像に詰め込まれており、スマートフォンでは文字が小さすぎて判読が困難。
* **ファイル閲覧が面倒**：学校のホームページに掲載されているため、確認するまでにいくつもの手順を踏む必要がある。

この「調べるのがだるい」という毎日の小さなストレスを解消するため、「もっと見やすく、スマートに献立を確認できるBotを作ろう！」と思い立ちました。

## 主な機能

寮生活の「あるある」な悩みを解決する、便利で少し遊び心のある機能を取り揃えています。

### 1. 献立の確認
リッチメニューのボタンをタップするだけで、その日の献立が画像で表示されます。 もちろん、明日の献立も確認可能です。

<img src="https://i.imgur.com/8QOapfS.png" width="300">

### 2. 欠食届の注意喚起
週末に寮の食事が必要ない場合、水曜日までに「欠食届」を提出する必要がありますが、これは寮生が忘れがちなことNo.1です。 そこで、提出期限が近づくと注意喚起のメッセージを送信する機能をつけました。

### 3. 周辺の飲食店検索
「今日は外食の気分」ボタンを押すと、高専近くの飲食店を「ラーメン」「定食」などのカテゴリ別に探すことができます。 さらに、ユーザー自身がおすすめのお店を登録することも可能です。

### 4. 隠しコマンド「おみくじ」
「おみくじ」とメッセージを送ると、運勢を占うことができます。 一日に一回だけ挑戦できる、ささやかなお楽しみ機能です。

## システム構成

このLINE Botは、サーバーレスでコストをかけずに運用できるよう構成されています。


* **LINE Messaging API**: ユーザーとの対話インターフェース。
* **Google Apps Script (GAS)**: すべてのロジックを処理するバックエンド。 ユーザーからの特定のメッセージ（キーワード）に反応して動作します。
* **Google Drive**: 献立の画像を保存する簡易的なデータベースとして利用。 GASがここから対応する日付の画像を取得し、ユーザーに送信します。

## 利用状況と反響

このBotは、特に広告を打つことなく、口コミだけで多くの寮生に広まりました。

* **驚異的な拡散力**: Instagramのストーリーでの口コミや寮内に掲示したポスターでの告知により、**公開からわずか4日で友だち登録者数が200人（212人）を突破**しました。
* **高い利用率**: 現在の友だち登録者数は**312人**。 これは全寮生（約575人）の**半数以上が利用している**計算になります。

この結果から、多くの寮生が同じ課題を感じていたことが分かりました。

## 開発して良かったこと

この開発を通じて、技術的な学びはもちろん、多くの貴重な体験ができました。

* **開発サイクルを実体験**: 課題発見から「物を作る」→「意見を貰う」→「改良する」という一連の流れを体験できたこと。
* **食生活の質の向上**: 「今日の夕飯、外でラーメンにしようかな」と思ったら寮の夕飯もラーメンだった、という悲劇を防げるようになった。
* **言ってみたかったセリフが言えた**: 一度は言ってみたかった「**それ作ったの俺だもん**」というセリフを、友人に言うことができました。

## 反省・今後の改善点

多くの人に使ってもらえた一方で、技術的な課題も見つかりました。

1.  **手動での献立更新**: 月に一度、ホームページから献立表をダウンロードし、手動で画像を分割・アップロードしている。この一連の作業は**自動化したい**。
2.  **データベースの導入**: ユーザーがお店を登録する機能で、送信された画像がそのままGoogle Driveに保存されるのはセキュリティ上危険。**データベースの学習と導入が必要**。
3.  **Flex Messageの手動実装**: おすすめのお店の情報は、手動でFlex MessageのJSONを作成している。これも**データベースなどから動的に生成できるように改善したい**。

## 開発者情報

* **名前**: naoto
* **所属**: 舞鶴高専 → 福井大学
* **趣味**: 読書とバスケットボール
